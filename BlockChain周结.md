---
title: BlockChain周结————区块链记账原理
date: 2018-03-23 15:41:15
tags: “区块链”
categories: "BlockChain"
---

# BlockChain周结————区块链记账原理

> 区块链作为当今热门的一个技术，开拓了数字货币的2.0时代，这里，我们开始总结一下区块链的记账原理

区块链是一个基于密码学安全的分布式账本，是一个方便验证，不可篡改的行本，在讲区块链记账之前，我们先说明一下哈希函数。

## 哈希函数

### 哈希函数的基本概念

1. 哈希函数又称散列函数，他是单向密码体制，即从明文到密文的不可逆映射，只有加密过程而没有解密过程，哈希函数可以将任意长度的输入经过变化后得到固定长度的输出，这个固定长度的输出，称为原消息的散列或消息映射。
2. 理想的哈希函数可以针对不同的输入得到不同的输出，如果存在两个不同的消息得到了相同的哈希值，那我们称这是一个碰撞

### 哈希函数的性质

1. 可压缩性：对于任意大小的输入x，哈希值的长度很小，并且是固定的长度。

2. 单向性： 单向性也就死通过给定的哈希值得到原文是不行的，求接哈希函数的逆很困难。

3. 抗碰撞性： 理想的哈希函数式无碰撞的，但是实际的算法设计中很难做到，有两种抗碰撞属性。分别是：

   a. 弱抗碰撞行：对于给定的一个消息，要发现另一个消息使其碰撞在计算上不可行。

   b. 强抗碰撞性质，对于任意的一对不同的消息，使其碰撞在计算上不可行

4. 高灵敏度： 当一个输入位发生变化时，会有一半以上的输出位发生变化

### 哈希函数的应用

1. 消息认证： 在一个开放的网络中，需要提供一个用来验证消息完整性的服务和机制， 即消息认证， 这种服务的主要功能时确保收到的消息确实与发送的消息的来源都是真实有效的。
2. 数字签名： 因为非对阵加密算法速度较慢，所以在消息摘要上进行数字签名，在统计上可以认为与对文件本身进行数字签名是等效的。
3. 口令的安全性：仅将口令的哈希值进行保存，进行口令娇艳的时候仅需比对哈希值即可，及时攻击者获取了口令的哈希值，也无法计算出口令
4. 数据完整性： 比较熟悉的校验算法有奇偶校验和循环冗余校验码（CRC），这两种方式并没有抗数据篡改的能力他们在一定程度上能检测并纠正数据传输中的信道误码，但不能放置对数据的破坏。

------



## 区块链的记账原理

假设有一个账页序号为0的账页交易记录如下:

| 账号 | 入账 | 出账 | 余额 | 备注说明    |
| ---- | ---- | ---- | ---- | ----------- |
| 王二 | 100  |      | 190  | 收到xxx货款 |
| 张三 |      | 100  | 30   | xxxx        |
| 李四 | 120  | 90   | 170  | xxxx        |

记账时间为：2018.3.23 21:26:15

区块链在记账是会把账页信息（包含序号、记账时间、交易记录）作为原始信息进行Hash, 得到一个Hash值，如：787635ACD, 用函数表示为：

```
Hash(序号0、记账时间、交易记录) = 787635ACD
```

账页信息和Hash值组合在一起就构成了第一个区块。

```
比特币系统里约10分钟记一次账，即每个区块生成时间大概间隔10分钟
```

在记第2个账页的时候，会把上一个块的Hash值和当前的账页信息一起作为原始信息进行Hash,即：

```
Hash(上一个Hash值、序号1、记账时间、交易记录) = 456635BCD
```

这样第2个区块不仅包含了本账页信息，还间接的包含了第一个区块的信息。依次按照此方法继续记账，则最新的区块总是间接包含了所有之前的账页信息。

所有这些区块组合起来就形成了区块链，这样的区块链就构成了一个便于验证（只要验证最后一个区块的Hash值就相当于验证了整个账本），不可更改（任何一个交易信息的更改，会让所有之后的区块的Hash值发生变化，这样在验证时就无法通过）的总账本。

> 并不是很详细的介绍，我觉得详情可以去看《区块链与新经济》——高航等编著这周暂且总结到这里，下周继续，大创是一场长跑，切记前期冲刺而疲惫。